/*! For license information please see main.95d5424145587cae2dce.js.LICENSE.txt */
(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,s=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){var e,t,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function c(n,a,o,s){var c=a&&a.prototype instanceof u?a:u,d=Object.create(c.prototype);return r(d,"_invoke",function(n,r,a){var o,s,c,u=0,d=a||[],l=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,s=0,c=e,p.n=n,i}};function m(n,r){for(s=n,c=r,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],m=p.p,f=o[2];n>3?(a=f===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(s=0,p.v=r,p.n=o[1]):m<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,p.n=f,s=0))}if(a||n>1)return i;throw l=!0,r}return function(a,d,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&m(d,f),s=d,c=f;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(p.n=-1),m(s,c)):p.n=c:p.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=p.n<0)?c:n.call(r,p))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(n,o,s),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(r(t={},o,(function(){return this})),t),m=l.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,r(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=l,r(m,"constructor",l),r(l,"constructor",d),d.displayName="GeneratorFunction",r(l,s,"GeneratorFunction"),r(m),r(m,s,"Generator"),r(m,o,(function(){return this})),r(m,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:c,m:f}})()}function r(e,t,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,t,n,a){if(t)o?o(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var s=function(t,n){r(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},r(e,t,n,a)}function a(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function c(e){a(s,r,o,c,i,"next",e)}function i(e){a(s,r,o,c,i,"throw",e)}c(void 0)}))}}var s,c,i,u,d,l,p,m,f,g,v,y,h,E,k,b,w,I,j,x,L,B,T,_,S,C,O,A,P,D,N,M,H,q,G,J,R,U,z,F,V,$,K,Q,W,X,Y,Z,ee,te,ne,re,ae,oe,se,ce,ie,ue,de,le,pe,me,fe,ge,ve,ye,he,Ee="https://real-time-task-manager-fac11501856a.herokuapp.com/api",ke=null,be=null,we=[],Ie=null;function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";P?(P.textContent=e,P.className="fixed bottom-4 left-1/2 -translate-x-1/2 p-3 rounded-md shadow-lg message-fade ".concat("success"===t?"bg-green-600":"error"===t?"bg-red-600":"bg-gray-800"," text-white"),P.classList.remove("hidden"),setTimeout((function(){P.classList.add("hidden")}),3e3)):console.log("Message (globalMessageDiv not ready):",e)}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";y?(y.textContent=e,y.className="mt-4 text-center ".concat("error"===t?"text-red-600":"text-green-600")):console.log("Auth Message (authMessageDiv not ready):",e)}function Le(){p&&l&&(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(p.classList.add("hidden"),l.classList.remove("hidden")):(p.classList.remove("hidden"),l.classList.add("hidden"))),y&&(y.textContent="")}function Be(e){return Te.apply(this,arguments)}function Te(){return Te=o(n().m((function e(t){var r,a,o,s,c,i,u,d=arguments;return n().w((function(e){for(;;)switch(e.n){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"GET",a=d.length>2&&void 0!==d[2]?d[2]:null,o={"Content-Type":"application/json"},be&&(o.Authorization="Bearer ".concat(be)),s={method:r,headers:o},a&&(s.body=JSON.stringify(a)),e.p=1,e.n=2,fetch("".concat(Ee).concat(t),s);case 2:return c=e.v,e.n=3,c.json();case 3:if(i=e.v,c.ok){e.n=4;break}throw new Error(i.message||"Something went wrong");case 4:return e.a(2,i);case 5:throw e.p=5,u=e.v,console.error("API call error:",u),u;case 6:return e.a(2)}}),e,null,[[1,5]])}))),Te.apply(this,arguments)}function _e(e){return Se.apply(this,arguments)}function Se(){return(Se=o(n().m((function e(t){var r,a,o,s,c;return n().w((function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),r=D.value,a=N.value,o=M.value,e.p=1,e.n=2,Be("/auth/register","POST",{username:r,email:a,password:o});case 2:e.v,je("Registration successful! Please log in.","success"),Le(!0),D.value="",N.value="",M.value="",e.n=4;break;case 3:e.p=3,(c=e.v).errors&&Array.isArray(c.errors)?(s=c.errors.map((function(e){return e.msg})).join("; "),xe("Validation failed: ".concat(s))):xe(c.message);case 4:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function Ce(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=o(n().m((function e(t){var r,a,o;return n().w((function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),r=H.value,a=q.value,e.p=1,e.n=2,Be("/auth/login","POST",{email:r,password:a});case 2:o=e.v,be=o.token,ke=o.user,localStorage.setItem("jwt_token",be),localStorage.setItem("current_user",JSON.stringify(ke)),Pe(),je("Logged in successfully!","success"),H.value="",q.value="",e.n=4;break;case 3:e.p=3,xe(e.v.message);case 4:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function Ae(){be=null,ke=null,localStorage.removeItem("jwt_token"),localStorage.removeItem("current_user"),location.reload()}function Pe(){be&&ke?(c&&i&&u&&(c.classList.add("hidden"),i.classList.remove("hidden"),u.textContent=ke.username),s&&s.connected?console.log("Socket.IO already connected."):((s=io(Ee.replace("/api",""),{})).on("connect",(function(){console.log("Socket.IO: Connected to server with ID: ".concat(s.id)),je("Real-time connection established!","success")})),s.on("disconnect",(function(){console.log("Socket.IO: Disconnected from server"),je("Real-time connection lost.","error")})),s.on("connect_error",(function(e){console.error("Socket.IO Connection Error:",e),je("Real-time connection error.","error")})),s.on("taskCreated",(function(e){je('New Task: "'.concat(e.task.title,'" created!'),"success"),rt(Ie,w.textContent,ft()),De()})),s.on("taskUpdated",(function(e){je('Task: "'.concat(e.task.title,'" updated!'),"success"),rt(Ie,w.textContent,ft())})),s.on("taskDeleted",(function(e){je("Task deleted!","success"),rt(Ie,w.textContent,ft())})),s.on("taskTagAdded",(function(e){je("Tag added to task!","success"),rt(Ie,w.textContent,ft())})),s.on("taskTagRemoved",(function(e){je("Tag removed from task!","success"),rt(Ie,w.textContent,ft())})),s.on("projectCreated",(function(e){je('New Project: "'.concat(e.project.name,'" created!'),"success"),De()})),s.on("projectUpdated",(function(e){je('Project: "'.concat(e.project.name,'" updated!'),"success"),De()})),s.on("projectDeleted",(function(e){je("Project deleted!","success"),De(),rt(Ie,w.textContent,ft())})),s.on("test_response",(function(e){console.log("Received test_response:",e),je(e.message,"info")}))),De(),function(){Ke.apply(this,arguments)}(),Qe(),rt()):(c&&i&&(c.classList.remove("hidden"),i.classList.add("hidden")),Le(!0))}function De(){return Ne.apply(this,arguments)}function Ne(){return(Ne=o(n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/projects");case 1:t=e.v,k&&(k.innerHTML="",0===t.projects.length?b.classList.remove("hidden"):(b.classList.add("hidden"),t.projects.forEach((function(e){return Me(e)})))),n=t.projects,S&&(S.innerHTML='<option value="">Select Project...</option>',n.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name,S.appendChild(t)}))),Ve(t.projects),e.n=3;break;case 2:e.p=2,r=e.v,je("Error fetching projects: ".concat(r.message),"error");case 3:return e.a(2)}var n}),e,null,[[0,2]])})))).apply(this,arguments)}function Me(e){if(k){var t=document.createElement("div");t.id="project-".concat(e.id),t.className="bg-white p-4 rounded-md shadow-sm flex justify-between items-center border-l-4 border-purple-500",t.innerHTML='\n        <div>\n            <h4 class="text-lg font-semibold text-gray-800">'.concat(e.name,'</h4>\n            <p class="text-sm text-gray-600">').concat(e.description||"No description",'</p>\n        </div>\n        <div class="flex space-x-2">\n            <button data-id="').concat(e.id,'" class="view-tasks-btn bg-blue-500 text-white p-2 rounded-md text-sm hover:bg-blue-600 transition shadow-sm">View Tasks</button>\n            <button data-id="').concat(e.id,'" data-name="').concat(e.name,'" data-description="').concat(e.description||"",'" class="edit-project-btn bg-yellow-500 text-white p-2 rounded-md text-sm hover:bg-yellow-600 transition shadow-sm">Edit</button>\n            <button data-id="').concat(e.id,'" class="delete-project-btn bg-red-500 text-white p-2 rounded-md text-sm hover:bg-red-600 transition shadow-sm">Delete</button>\n        </div>\n    '),k.appendChild(t),t.querySelector(".view-tasks-btn").addEventListener("click",(function(t){Ie=e.id,rt(e.id,e.name)})),t.querySelector(".edit-project-btn").addEventListener("click",(function(e){!function(e){ne&&(oe.value=e.id,se.value=e.name,ce.value=e.description,ne.classList.remove("hidden"))}({id:e.target.dataset.id,name:e.target.dataset.name,description:e.target.dataset.description})})),t.querySelector(".delete-project-btn").addEventListener("click",(function(e){var t=e.target.dataset.id;confirm("Are you sure you want to delete this project? This will also delete all associated tasks.")&&function(e){Fe.apply(this,arguments)}(t)}))}}function He(){ne&&(ne.classList.add("hidden"),re.reset())}function qe(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=o(n().m((function e(t){var r,a,o,s;return n().w((function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),r=oe.value,a=se.value,o=ce.value,e.p=1,e.n=2,Ue(r,a,o);case 2:je("Project updated successfully!","success"),He(),e.n=4;break;case 3:e.p=3,s=e.v,je("Error updating project: ".concat(s.message),"error");case 4:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function Je(e){return Re.apply(this,arguments)}function Re(){return(Re=o(n().m((function e(t){var r,a;return n().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),E){e.n=1;break}return e.a(2);case 1:if(r=E.value){e.n=2;break}return je("Project name cannot be empty.","error"),e.a(2);case 2:return e.p=2,e.n=3,Be("/projects","POST",{name:r,description:""});case 3:E.value="",je("Project created!","success"),e.n=5;break;case 4:e.p=4,a=e.v,je("Error creating project: ".concat(a.message),"error");case 5:return e.a(2)}}),e,null,[[2,4]])})))).apply(this,arguments)}function Ue(e,t,n){return ze.apply(this,arguments)}function ze(){return(ze=o(n().m((function e(t,r,a){var o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/projects/".concat(t),"PUT",{name:r,description:a});case 1:je("Project updated!","success"),e.n=3;break;case 2:e.p=2,o=e.v,je("Error updating project: ".concat(o.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function Fe(){return(Fe=o(n().m((function e(t){var r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/projects/".concat(t),"DELETE");case 1:je("Project deleted!","success"),e.n=3;break;case 2:e.p=2,r=e.v,je("Error deleting project: ".concat(r.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function Ve(e){if(X){X.innerHTML="";var t=document.createElement("option");t.value="",t.textContent="Select Project...",X.appendChild(t),e.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name,X.appendChild(t)}))}}var $e=[];function Ke(){return(Ke=o(n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/users");case 1:t=e.v,$e=t.users,_&&W&&ge&&(_.innerHTML='<option value="">Assign to...</option>',W.innerHTML='<option value="">Assign to...</option>',ge.innerHTML='<option value="">All Assignees</option>',$e.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.username,_.appendChild(t),W.appendChild(t.cloneNode(!0)),ge.appendChild(t.cloneNode(!0))}))),e.n=3;break;case 2:e.p=2,r=e.v,console.warn("Could not fetch users for assignment. Skipping user dropdown population. Error:",r.message),je("Could not load users for assignment: ".concat(r.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function Qe(){return We.apply(this,arguments)}function We(){return(We=o(n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/tags");case 1:t=e.v,we=t.tags,de&&(de.innerHTML="",0===we.length?le.classList.remove("hidden"):(le.classList.add("hidden"),we.forEach((function(e){return Xe(e)})))),n=we,ee&&(ee.innerHTML="",n.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name,ee.appendChild(t)}))),tt(we),nt(we),e.n=3;break;case 2:e.p=2,r=e.v,console.warn("Could not fetch tags. Error:",r.message),je("Could not load tags: ".concat(r.message),"error");case 3:return e.a(2)}var n}),e,null,[[0,2]])})))).apply(this,arguments)}function Xe(e){if(de){var t=document.createElement("div");t.id="tag-".concat(e.id),t.className="bg-gray-200 rounded-full px-4 py-2 text-sm font-semibold text-gray-700 flex items-center justify-between shadow-sm",t.innerHTML="\n        <span>".concat(e.name,'</span>\n        <button data-id="').concat(e.id,'" class="delete-tag-btn ml-2 text-red-500 hover:text-red-700 transition">\n            &times;\n        </button>\n    '),de.appendChild(t),t.querySelector(".delete-tag-btn").addEventListener("click",(function(e){var t=e.target.dataset.id;confirm("Are you sure you want to delete this tag? This will also remove it from all tasks.")&&function(e){et.apply(this,arguments)}(t)}))}}function Ye(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=o(n().m((function e(t){var r,a;return n().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),ue){e.n=1;break}return e.a(2);case 1:if(r=ue.value.trim()){e.n=2;break}return je("Tag name cannot be empty.","error"),e.a(2);case 2:return e.p=2,e.n=3,Be("/tags","POST",{name:r});case 3:ue.value="",je("Tag created!","success"),Qe(),e.n=5;break;case 4:e.p=4,a=e.v,je("Error creating tag: ".concat(a.message),"error");case 5:return e.a(2)}}),e,null,[[2,4]])})))).apply(this,arguments)}function et(){return(et=o(n().m((function e(t){var r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/tags/".concat(t),"DELETE");case 1:je("Tag deleted!","success"),Qe(),e.n=3;break;case 2:e.p=2,r=e.v,je("Error deleting tag: ".concat(r.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function tt(e){Z&&(Z.innerHTML="",e.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name,Z.appendChild(t)})))}function nt(e){ve&&(ve.innerHTML="",e.forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name,ve.appendChild(t)})))}function rt(){return at.apply(this,arguments)}function at(){return at=o(n().m((function e(){var t,r,a,o,s,c,i,u=arguments;return n().w((function(e){for(;;)switch(e.n){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:null,r=u.length>1&&void 0!==u[1]?u[1]:"All Projects",a=u.length>2&&void 0!==u[2]?u[2]:{},w&&(w.textContent=r),o=new URLSearchParams,t&&o.append("project_id",t),a.search&&o.append("search",a.search),a.priority&&o.append("priority",a.priority),a.status&&o.append("status",a.status),a.assigned_to&&o.append("assigned_to",a.assigned_to),a.tags&&a.tags.length>0&&o.append("tags",a.tags.join(",")),s="/tasks?".concat(o.toString()),e.p=1,e.n=2,Be(s);case 2:c=e.v,O&&(O.innerHTML="",0===c.tasks.length?A.classList.remove("hidden"):(A.classList.add("hidden"),c.tasks.forEach((function(e){return ot(e)})))),e.n=4;break;case 3:e.p=3,i=e.v,be?je("Error fetching tasks: ".concat(i.message),"error"):console.warn("Initial task fetch unauthorized (expected before login): ".concat(i.message));case 4:return e.a(2)}}),e,null,[[1,3]])}))),at.apply(this,arguments)}function ot(e){if(O){var t=document.createElement("div");t.id="task-".concat(e.id),t.className="bg-white p-4 rounded-md shadow-sm flex justify-between items-start border-l-4 border-yellow-500";var r=e.tags?e.tags.map((function(t){return'\n        <span class="inline-flex items-center bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2">\n            '.concat(t.name,'\n            <button data-task-id="').concat(e.id,'" data-tag-id="').concat(t.id,'" class="remove-tag-btn ml-1 text-gray-500 hover:text-red-700 transition text-xs font-bold">&times;</button>\n        </span>\n    ')})).join(""):"";t.innerHTML='\n        <div class="flex-grow">\n            <h4 class="text-lg font-semibold text-gray-800">'.concat(e.title,'</h4>\n            <p class="text-sm text-gray-600 mb-2">').concat(e.description||"No description",'</p>\n            <p class="text-xs text-gray-500 mb-2">\n                Due: ').concat(e.due_date?new Date(e.due_date).toLocaleDateString():"N/A",' |\n                Priority: <span class="font-medium text-').concat(function(e){switch(e){case"urgent":return"red-600";case"high":return"orange-600";case"medium":return"blue-600";case"low":return"green-600";default:return"gray-600"}}(e.priority),'">').concat(e.priority,'</span> |\n                Status: <span class="font-medium text-').concat(function(e){switch(e){case"completed":return"green-600";case"in-progress":return"blue-600";case"blocked":return"red-600";case"pending":return"yellow-600";default:return"gray-600"}}(e.status),'">').concat(e.status,'</span>\n            </p>\n            <p class="text-xs text-gray-500 mb-2">\n                Project: ').concat(e.project_name||"N/A"," | Assigned To: ").concat(e.assigned_to_username||"Unassigned",'\n            </p>\n            <div class="mt-2">').concat(r,'</div>\n        </div>\n        <div class="flex flex-col space-y-2 ml-4">\n            <button data-id="').concat(e.id,'" \n                    data-title="').concat(e.title,'" \n                    data-description="').concat(e.description||"",'"\n                    data-due-date="').concat(e.due_date?new Date(e.due_date).toISOString().split("T")[0]:"",'"\n                    data-priority="').concat(e.priority,'"\n                    data-status="').concat(e.status,'"\n                    data-assigned-to="').concat(e.assigned_to||"",'"\n                    data-project-id="').concat(e.project_id,'"\n                    data-parent-task-id="').concat(e.parent_task_id||"","\"\n                    data-tags='").concat(JSON.stringify(e.tags||[]),'\'\n                    class="edit-task-btn bg-yellow-500 text-white p-2 rounded-md text-sm hover:bg-yellow-600 transition shadow-sm">Edit</button>\n            <button data-id="').concat(e.id,'" class="delete-task-btn bg-red-500 text-white p-2 rounded-md text-sm hover:bg-red-600 transition shadow-sm">Delete</button>\n        </div>\n    '),O.appendChild(t),t.querySelector(".edit-task-btn").addEventListener("click",(function(e){!function(e){G&&(U.value=e.id,z.value=e.project_id,te.value=JSON.stringify(e.tags||[]),F.value=e.title,V.value=e.description,$.value=e.due_date,K.value=e.priority,Q.value=e.status,W.value=e.assigned_to||"",X.value=e.project_id||"",Y.value=e.parent_task_id,Z&&(Array.from(Z.options).forEach((function(e){e.selected=!1})),e.tags.forEach((function(e){var t=Z.querySelector('option[value="'.concat(e.id,'"]'));t&&(t.selected=!0)}))),G.classList.remove("hidden"))}({id:e.target.dataset.id,title:e.target.dataset.title,description:e.target.dataset.description,due_date:e.target.dataset.dueDate,priority:e.target.dataset.priority,status:e.target.dataset.status,assigned_to:e.target.dataset.assignedTo,project_id:e.target.dataset.projectId,parent_task_id:e.target.dataset.parentTaskId,tags:JSON.parse(e.target.dataset.tags||"[]")})})),t.querySelector(".delete-task-btn").addEventListener("click",(function(e){var t=e.target.dataset.id;confirm("Are you sure you want to delete this task?")&&function(e){mt.apply(this,arguments)}(t)})),t.querySelectorAll(".remove-tag-btn").forEach((function(e){e.addEventListener("click",function(){var e=o(n().m((function e(t){var r,a,o;return n().w((function(e){for(;;)switch(e.n){case 0:if(r=t.target.dataset.taskId,a=t.target.dataset.tagId,!confirm("Are you sure you want to remove this tag from the task?")){e.n=4;break}return e.p=1,e.n=2,Be("/tasks/".concat(r,"/tags/").concat(a),"DELETE");case 2:je("Tag removed from task!","success"),rt(Ie,w.textContent,ft()),e.n=4;break;case 3:e.p=3,o=e.v,je("Error removing tag: ".concat(o.message),"error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}())}))}}function st(){G&&(G.classList.add("hidden"),J.reset(),Z&&Array.from(Z.options).forEach((function(e){return e.selected=!1})),te.value="")}function ct(e){return it.apply(this,arguments)}function it(){return(it=o(n().m((function t(r){var a,o,s,c,i,u,d,l,p,m,f,g,v,y,h;return n().w((function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),a=U.value,z.value,o={title:F.value,description:V.value,due_date:$.value||null,priority:K.value,status:Q.value,assigned_to:W.value?parseInt(W.value):null,project_id:X.value?parseInt(X.value):null,parent_task_id:Y.value?parseInt(Y.value):null},s=Array.from(Z.selectedOptions).map((function(e){return parseInt(e.value)})),t.p=1,t.n=2,lt(a,o);case 2:je("Task updated successfully!","success"),st(),c=JSON.parse(te.value||"[]"),i=s.filter((function(e){return!c.some((function(t){return t.id===e}))})),u=c.filter((function(e){return!s.includes(e.id)})).map((function(e){return e.id})),d=e(u),t.p=3,d.s();case 4:if((l=d.n()).done){t.n=6;break}return p=l.value,t.n=5,Be("/tasks/".concat(a,"/tags/").concat(p),"DELETE");case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,v=t.v,d.e(v);case 8:return t.p=8,d.f(),t.f(8);case 9:m=e(i),t.p=10,m.s();case 11:if((f=m.n()).done){t.n=13;break}return g=f.value,t.n=12,Be("/tasks/".concat(a,"/tags/").concat(g),"POST");case 12:t.n=11;break;case 13:t.n=15;break;case 14:t.p=14,y=t.v,m.e(y);case 15:return t.p=15,m.f(),t.f(15);case 16:rt(Ie,w.textContent,ft()),t.n=18;break;case 17:t.p=17,h=t.v,je("Error updating task: ".concat(h.message),"error");case 18:return t.a(2)}}),t,null,[[10,14,15,16],[3,7,8,9],[1,17]])})))).apply(this,arguments)}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=o(n().m((function t(r){var a,o,s,c,i,u,d,l,p,m,f,g,v,y,h,E;return n().w((function(t){for(;;)switch(t.n){case 0:if(r.preventDefault(),j&&S){t.n=1;break}return t.a(2);case 1:if(a=j.value,o=x.value,s=L.value||null,c=B.value,i=T.value,u=_.value||null,d=S.value,l=C.value||null,p=Array.from(ee.selectedOptions).map((function(e){return parseInt(e.value)})),a&&d){t.n=2;break}return je("Task title and project must be selected.","error"),t.a(2);case 2:return t.p=2,t.n=3,Be("/tasks","POST",{title:a,description:o,due_date:s,priority:c,status:i,assigned_to:u?parseInt(u):null,project_id:parseInt(d),parent_task_id:l?parseInt(l):null});case 3:m=t.v,f=m.task.id,g=e(p),t.p=4,g.s();case 5:if((v=g.n()).done){t.n=7;break}return y=v.value,t.n=6,Be("/tasks/".concat(f,"/tags/").concat(y),"POST");case 6:t.n=5;break;case 7:t.n=9;break;case 8:t.p=8,h=t.v,g.e(h);case 9:return t.p=9,g.f(),t.f(9);case 10:je("Task created!","success"),I.reset(),Array.from(ee.options).forEach((function(e){return e.selected=!1})),Array.from(Z.options).forEach((function(e){return e.selected=!1})),rt(Ie,w.textContent,ft()),t.n=12;break;case 11:t.p=11,E=t.v,je("Error creating task: ".concat(E.message),"error");case 12:return t.a(2)}}),t,null,[[4,8,9,10],[2,11]])})))).apply(this,arguments)}function lt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=o(n().m((function e(t,r){var a;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,void 0!==r.assigned_to&&null!==r.assigned_to&&(r.assigned_to=r.assigned_to?parseInt(r.assigned_to):null),e.n=1,Be("/tasks/".concat(t),"PUT",r);case 1:je("Task updated!","success"),e.n=3;break;case 2:e.p=2,a=e.v,je("Error updating task: ".concat(a.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function mt(){return(mt=o(n().m((function e(t){var r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Be("/tasks/".concat(t),"DELETE");case 1:je("Task deleted!","success"),e.n=3;break;case 2:e.p=2,r=e.v,je("Error deleting task: ".concat(r.message),"error");case 3:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function ft(){return{search:pe.value.trim(),priority:me.value,status:fe.value,assigned_to:ge.value||null,tags:Array.from(ve.selectedOptions).map((function(e){return parseInt(e.value)}))}}function gt(){var e=ft();rt(Ie,w.textContent,e)}function vt(){pe.value="",me.value="",fe.value="",ge.value="",Array.from(ve.options).forEach((function(e){return e.selected=!1})),rt(Ie,w.textContent)}document.addEventListener("DOMContentLoaded",(function(){c=document.getElementById("auth-section"),i=document.getElementById("main-app-section"),u=document.getElementById("welcome-username"),d=document.getElementById("logout-btn"),P=document.getElementById("global-message"),l=document.getElementById("register-form"),p=document.getElementById("login-form"),m=document.getElementById("show-login-btn"),f=document.getElementById("show-register-btn"),g=document.getElementById("register-btn"),v=document.getElementById("login-btn"),y=document.getElementById("auth-message"),D=document.getElementById("register-username"),N=document.getElementById("register-email"),M=document.getElementById("register-password"),H=document.getElementById("login-email"),q=document.getElementById("login-password"),document.getElementById("projects-section"),h=document.getElementById("create-project-form"),E=document.getElementById("project-name"),k=document.getElementById("projects-list"),b=document.getElementById("no-projects-message"),document.getElementById("tasks-section"),w=document.getElementById("current-project-name"),I=document.getElementById("create-task-form"),j=document.getElementById("task-title"),x=document.getElementById("task-description"),L=document.getElementById("task-due-date"),B=document.getElementById("task-priority"),T=document.getElementById("task-status"),_=document.getElementById("task-assigned-to"),S=document.getElementById("task-project-id"),C=document.getElementById("task-parent-task-id"),O=document.getElementById("tasks-list"),A=document.getElementById("no-tasks-message"),ee=document.getElementById("task-tags"),G=document.getElementById("edit-task-modal"),J=document.getElementById("edit-task-form"),R=document.getElementById("cancel-edit-task-btn"),U=document.getElementById("edit-task-id"),z=document.getElementById("edit-task-original-project-id"),F=document.getElementById("edit-task-title"),V=document.getElementById("edit-task-description"),$=document.getElementById("edit-task-due-date"),K=document.getElementById("edit-task-priority"),Q=document.getElementById("edit-task-status"),W=document.getElementById("edit-task-assigned-to"),X=document.getElementById("edit-task-project-id"),Y=document.getElementById("edit-task-parent-task-id"),Z=document.getElementById("edit-task-tags"),te=document.getElementById("edit-task-original-tags"),ne=document.getElementById("edit-project-modal"),re=document.getElementById("edit-project-form"),ae=document.getElementById("cancel-edit-project-btn"),oe=document.getElementById("edit-project-id"),se=document.getElementById("edit-project-name"),ce=document.getElementById("edit-project-description"),document.getElementById("tags-section"),ie=document.getElementById("create-tag-form"),ue=document.getElementById("tag-name"),de=document.getElementById("tags-list"),le=document.getElementById("no-tags-message"),pe=document.getElementById("task-filter-search"),me=document.getElementById("task-filter-priority"),fe=document.getElementById("task-filter-status"),ge=document.getElementById("task-filter-assigned-to"),ve=document.getElementById("task-filter-tags"),ye=document.getElementById("apply-filters-btn"),he=document.getElementById("clear-filters-btn"),m.addEventListener("click",(function(){return Le(!0)})),f.addEventListener("click",(function(){return Le(!1)})),g.addEventListener("click",_e),v.addEventListener("click",Ce),d.addEventListener("click",Ae),h.addEventListener("submit",Je),I.addEventListener("submit",ut),J.addEventListener("submit",ct),R.addEventListener("click",st),G.addEventListener("click",(function(e){e.target===G&&st()})),re.addEventListener("submit",qe),ae.addEventListener("click",He),ne.addEventListener("click",(function(e){e.target===ne&&He()})),ie&&ie.addEventListener("submit",Ye),ye&&ye.addEventListener("click",gt),he&&he.addEventListener("click",vt),pe&&pe.addEventListener("input",gt),me&&me.addEventListener("change",gt),fe&&fe.addEventListener("change",gt),ge&&ge.addEventListener("change",gt),ve&&ve.addEventListener("change",gt),be=localStorage.getItem("jwt_token"),ke=JSON.parse(localStorage.getItem("current_user")),Pe(),be||console.warn("Not logged in. Initial task fetch will be unauthorized (expected).")}))})();